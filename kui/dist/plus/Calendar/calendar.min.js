/** 
 Calendar v1.2.0 */
+function(a){"use strict";var b=!1,c=function(c){function d(a){a=new Date(a);var b=a.getFullYear(),c=a.getMonth(),d=c+1,e=a.getDate(),f=a.getDay();return g.params.dateFormat.replace(/yyyy/g,b).replace(/yy/g,(b+"").substring(2)).replace(/mm/g,d<10?"0"+d:d).replace(/m/g,d).replace(/MM/g,g.params.monthNames[c]).replace(/M/g,g.params.monthNamesShort[c]).replace(/dd/g,e<10?"0"+e:e).replace(/d/g,e).replace(/DD/g,g.params.dayNames[f]).replace(/D/g,g.params.dayNamesShort[f])}function e(a){if(a.preventDefault(),kui.isWeixin&&"android"==kui.device.os&&g.params.inputReadOnly&&(this.focus(),this.blur()),!g.opened&&(g.open(),g.params.scrollToInput)){var b=g.input.parents(".content");if(0===b.length)return;var c,d=parseInt(b.css("padding-top"),10),e=parseInt(b.css("padding-bottom"),10),f=b[0].offsetHeight-d-g.container.height(),h=b[0].scrollHeight-d-g.container.height(),i=g.input.offset().top-d+g.input[0].offsetHeight;if(i>f){var j=b.scrollTop()+i-f;j+f>h&&(c=j+f-h+e,f===h&&(c=g.container.height()),b.css({"padding-bottom":c+"px"})),b.scrollTop(j,300)}}}function f(){g.opened=!1,g.input&&g.input.length>0&&g.input.parents(".content").css({"padding-bottom":""}),g.destroyCalendarEvents()}var g=this,h={monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["周日","周一","周二","周三","周四","周五","周六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],firstDay:1,weekendDays:[0,6],multiple:!1,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:!0,animate:!0,closeOnSelect:!0,monthPicker:!0,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon-left"></i></a><span class="current-month-value"></span><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon-right"></i></a></div>',yearPicker:!0,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon-left"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon-right"></i></a></div>',weekHeader:!0,scrollToInput:!0,inputReadOnly:!0,toolbar:!0,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>',id:"calendar",type:"calendar",anim:"bottom"};c=c||{},c=a.extend(h,c),c.skin+=" kui-calendar",g.params=c,g.initialized=!1,g.inline=!!g.params.container,g.isH="horizontal"===g.params.direction;var i=g.isH&&b?-1:1;return g.animating=!1,g.addValue=function(a){if(g.params.multiple){g.value||(g.value=[]);for(var b,c=0;c<g.value.length;c++)new Date(a).getTime()===new Date(g.value[c]).getTime()&&(b=c);"undefined"==typeof b?g.value.push(a):g.value.splice(b,1),g.updateValue()}else g.value=[a],g.updateValue()},g.setValue=function(a){g.value=a,g.updateValue()},g.updateValue=function(){g.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var b,c;for(b=0;b<g.value.length;b++){var e=new Date(g.value[b]);g.wrapper.find('.picker-calendar-day[data-date="'+e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()+'"]').addClass("picker-calendar-day-selected")}if(g.params.onChange&&g.params.onChange(g,g.value,g.value.map(d)),g.input&&g.input.length>0){if(g.params.formatValue)c=g.params.formatValue(g,g.value);else{for(c=[],b=0;b<g.value.length;b++)c.push(d(g.value[b]));c=c.join(", ")}a(g.input).val(c),a(g.input).trigger("change")}},g.initCalendarEvents=function(){function c(a){o||n||(n=!0,p=s="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,q=s="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY,t=(new Date).getTime(),z=0,C=!0,B=void 0,v=w=g.monthsTranslate)}function d(a){if(n){if(r="touchmove"===a.type?a.targetTouches[0].pageX:a.pageX,s="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY,"undefined"==typeof B&&(B=!!(B||Math.abs(s-q)>Math.abs(r-p))),g.isH&&B)return void(n=!1);if(a.preventDefault(),g.animating)return void(n=!1);C=!1,o||(o=!0,x=g.wrapper[0].offsetWidth,y=g.wrapper[0].offsetHeight,g.wrapper.transition(0)),a.preventDefault(),A=g.isH?r-p:s-q,z=A/(g.isH?x:y),w=100*(g.monthsTranslate*i+z),g.wrapper.transform("translate3d("+(g.isH?w:0)+"%, "+(g.isH?0:w)+"%, 0)")}}function e(a){return n&&o?(n=o=!1,u=(new Date).getTime(),u-t<300?Math.abs(A)<10?g.resetMonth():A>=10?b?g.nextMonth():g.prevMonth():b?g.prevMonth():g.nextMonth():z<=-.5?b?g.prevMonth():g.nextMonth():z>=.5?b?g.nextMonth():g.prevMonth():g.resetMonth(),void setTimeout(function(){C=!0},100)):void(n=o=!1)}function f(b){if(C){var c=a(b.target).parents(".picker-calendar-day");if(0===c.length&&a(b.target).hasClass("picker-calendar-day")&&(c=a(b.target)),0!==c.length&&(!c.hasClass("picker-calendar-day-selected")||g.params.multiple)&&!c.hasClass("picker-calendar-day-disabled")){c.hasClass("picker-calendar-day-next")&&g.nextMonth(),c.hasClass("picker-calendar-day-prev")&&g.prevMonth();var d=c.attr("data-year"),e=c.attr("data-month"),f=c.attr("data-day");g.params.onDayClick&&g.params.onDayClick(g,c[0],d,e,f),g.addValue(new Date(d,e,f).getTime()),g.params.closeOnSelect&&g.close()}}}function h(a){o||n||(n=!0,p=s="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,q=s="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY,t=(new Date).getTime(),z=0,C=!0,B=void 0,v=w=g.yearsTranslate)}function j(a){if(n){if(r="touchmove"===a.type?a.targetTouches[0].pageX:a.pageX,s="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY,"undefined"==typeof B&&(B=!!(B||Math.abs(s-q)>Math.abs(r-p))),g.isH&&B)return void(n=!1);if(a.preventDefault(),g.animating)return void(n=!1);C=!1,o||(o=!0,x=g.yearsPickerWrapper[0].offsetWidth,y=g.yearsPickerWrapper[0].offsetHeight,g.yearsPickerWrapper.transition(0)),a.preventDefault(),A=g.isH?r-p:s-q,z=A/(g.isH?x:y),w=100*(g.yearsTranslate*i+z),g.yearsPickerWrapper.transform("translate3d("+(g.isH?w:0)+"%, "+(g.isH?0:w)+"%, 0)")}}function k(a){return n&&o?(n=o=!1,u=(new Date).getTime(),u-t<300?Math.abs(A)<10?g.resetYearsGroup():A>=10?b?g.nextYearsGroup():g.prevYearsGroup():b?g.prevYearsGroup():g.nextYearsGroup():z<=-.5?b?g.prevYearsGroup():g.nextYearsGroup():z>=.5?b?g.nextYearsGroup():g.prevYearsGroup():g.resetYearsGroup(),void setTimeout(function(){C=!0},100)):void(n=o=!1)}function l(){var b=(a(this).text(),g.container.find(".picker-calendar-years-picker"));b.show().animate({translate3d:"0, 0, 0"},300,"easy-out").addClass("picker-calendar-active").siblings().removeClass("picker-calendar-active"),g.updateSelectedInPickers(),b.on("click",".picker-calendar-year-unit",g.pickYear)}function m(){var a=g.container.find(".picker-calendar-months-picker");a.show().animate({translate3d:"0, 0, 0"},300,"easy-out").addClass("picker-calendar-active").siblings().removeClass("picker-calendar-active"),g.updateSelectedInPickers(),a.on("click",".picker-calendar-month-unit",g.pickMonth)}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=!0;g.container.find(".picker-calendar-prev-month").on("click",g.prevMonth),g.container.find(".picker-calendar-next-month").on("click",g.nextMonth),g.container.find(".picker-calendar-prev-year").on("click",g.prevYear),g.container.find(".picker-calendar-next-year").on("click",g.nextYear),g.container.find(".current-year-value").on("click",l),g.container.find(".current-month-value").on("click",m),g.wrapper.on("click",f),g.params.touchMove&&(g.yearsPickerWrapper.on(a.touchEvents.start,h),g.yearsPickerWrapper.on(a.touchEvents.move,j),g.yearsPickerWrapper.on(a.touchEvents.end,k),g.wrapper.on(a.touchEvents.start,c),g.wrapper.on(a.touchEvents.move,d),g.wrapper.on(a.touchEvents.end,e)),g.container[0].f7DestroyCalendarEvents=function(){g.container.find(".picker-calendar-prev-month").off("click",g.prevMonth),g.container.find(".picker-calendar-next-month").off("click",g.nextMonth),g.container.find(".picker-calendar-prev-year").off("click",g.prevYear),g.container.find(".picker-calendar-next-year").off("click",g.nextYear),g.wrapper.off("click",f),g.params.touchMove&&(g.wrapper.off(a.touchEvents.start,c),g.wrapper.off(a.touchEvents.move,d),g.wrapper.off(a.touchEvents.end,e))}},g.destroyCalendarEvents=function(a){"f7DestroyCalendarEvents"in g.container[0]&&g.container[0].f7DestroyCalendarEvents()},g.yearsGroupHTML=function(a,b){a=new Date(a);var c=a.getFullYear(),d=(new Date).getFullYear(),e=25,f=c-Math.floor(e/2),g="";"next"===b&&(f+=e),"prev"===b&&(f-=e);for(var h=0;h<5;h+=1){var i="";i+='<div class="picker-calendar-row">';for(var j=0;j<5;j+=1)i+=f===d?'<div class="picker-calendar-year-unit current-calendar-year-unit" data-year="'+f+'"><span>'+f+"</span></div>":f===c?'<div class="picker-calendar-year-unit picker-calendar-year-unit-selected" data-year="'+f+'"><span>'+f+"</span></div>":'<div class="picker-calendar-year-unit" data-year="'+f+'"><span>'+f+"</span></div>",f+=1;i+="</div>",g+=i}return g='<div class="picker-calendar-years-group">'+g+"</div>"},g.pickYear=function(){var b=a(this).text(),c=g.wrapper.find(".picker-calendar-month-current").attr("data-year");g.yearsPickerWrapper.find(".picker-calendar-year-unit").removeClass("picker-calendar-year-unit-selected"),a(this).addClass("picker-calendar-year-unit-selected"),c!==b?(g.setYearMonth(b),g.container.find(".picker-calendar-years-picker").hide()):g.container.find(".picker-calendar-years-picker").animate({translate3d:"0, 100%, 0"},300,"easy-out")},g.onYearsChangeEnd=function(a){g.animating=!1;var b,c,d,e=g.yearsPickerWrapper.children(".picker-calendar-years-next").find(".picker-calendar-year-unit").length;"next"===a&&(d=parseInt(g.yearsPickerWrapper.children(".picker-calendar-years-next").find(".picker-calendar-year-unit").eq(Math.floor(e/2)).text()),b=g.yearsGroupHTML(new Date(d,g.currentMonth),"next"),g.yearsPickerWrapper.append(b),g.yearsPickerWrapper.children().first().remove(),g.yearsGroups=g.container.find(".picker-calendar-years-group")),"prev"===a&&(d=parseInt(g.yearsPickerWrapper.children(".picker-calendar-years-prev").find(".picker-calendar-year-unit").eq(Math.floor(e/2)).text()),c=g.yearsGroupHTML(new Date(d,g.currentMonth),"prev"),g.yearsPickerWrapper.prepend(c),g.yearsPickerWrapper.children().last().remove(),g.yearsGroups=g.container.find(".picker-calendar-years-group")),g.setYearsTranslate(g.yearsTranslate)},g.monthsGroupHTML=function(a){a=new Date(a);for(var b=a.getMonth()+1,c=(new Date).getMonth()+1,d=1,e="",f=0;f<3;f+=1){var h="";h+='<div class="picker-calendar-row">';for(var i=0;i<4;i+=1)h+=d===c?'<div class="picker-calendar-month-unit current-calendar-month-unit" data-month="'+(d-1)+'"><span>'+g.params.monthNames[d-1]+"</span></div>":d===b?'<div class="picker-calendar-month-unit picker-calendar-month-selected" data-month="'+(d-1)+'"><span>'+g.params.monthNames[d-1]+"</span></div>":'<div class="picker-calendar-month-unit" data-month="'+(d-1)+'"><span>'+g.params.monthNames[d-1]+"</span></div>",d+=1;h+="</div>",e+=h}return e='<div class="picker-calendar-months-group">'+e+"</div>"},g.pickMonth=function(){var b=a(this).attr("data-month"),c=g.wrapper.find(".picker-calendar-month-current").attr("data-year"),d=g.wrapper.find(".picker-calendar-month-current").attr("data-month");g.monthsPickerWrapper.find(".picker-calendar-month-unit").removeClass("picker-calendar-month-unit-selected"),a(this).addClass("picker-calendar-month-unit-selected"),d!==b?(g.setYearMonth(c,b),g.container.find(".picker-calendar-months-picker").hide()):g.container.find(".picker-calendar-months-picker").animate({translate3d:"0, 100%, 0"},300,"easy-out")},g.daysInMonth=function(a){var b=new Date(a);return new Date(b.getFullYear(),b.getMonth()+1,0).getDate()},g.monthHTML=function(a,b){a=new Date(a);var c=a.getFullYear(),d=a.getMonth();a.getDate();"next"===b&&(a=11===d?new Date(c+1,0):new Date(c,d+1,1)),"prev"===b&&(a=0===d?new Date(c-1,11):new Date(c,d-1,1)),"next"!==b&&"prev"!==b||(d=a.getMonth(),c=a.getFullYear());var e=g.daysInMonth(new Date(a.getFullYear(),a.getMonth()).getTime()-864e6),f=g.daysInMonth(a),h=new Date(a.getFullYear(),a.getMonth()).getDay();0===h&&(h=7);var i,j,k,l=[],m=6,n=7,o="",p=0+(g.params.firstDay-1),q=(new Date).setHours(0,0,0,0),r=g.params.minDate?new Date(g.params.minDate).getTime():null,s=g.params.maxDate?new Date(g.params.maxDate).getTime():null;if(g.value&&g.value.length)for(j=0;j<g.value.length;j++)l.push(new Date(g.value[j]).setHours(0,0,0,0));for(j=1;j<=m;j++){var t="";for(k=1;k<=n;k++){var u=k;p++;var v=p-h,w="";v<0?(v=e+v+1,w+=" picker-calendar-day-prev",i=new Date(d-1<0?c-1:c,d-1<0?11:d-1,v).getTime()):(v+=1,v>f?(v-=f,w+=" picker-calendar-day-next",i=new Date(d+1>11?c+1:c,d+1>11?0:d+1,v).getTime()):i=new Date(c,d,v).getTime()),i===q&&(w+=" picker-calendar-day-today"),l.indexOf(i)>=0&&(w+=" picker-calendar-day-selected"),g.params.weekendDays.indexOf(u-1)>=0&&(w+=" picker-calendar-day-weekend"),(r&&i<r||s&&i>s)&&(w+=" picker-calendar-day-disabled"),i=new Date(i);var x=i.getFullYear(),y=i.getMonth();t+='<div data-year="'+x+'" data-month="'+y+'" data-day="'+v+'" class="picker-calendar-day'+w+'" data-date="'+(x+"-"+y+"-"+v)+'"><span>'+v+"</span></div>"}o+='<div class="picker-calendar-row">'+t+"</div>"}return o='<div class="picker-calendar-month" data-year="'+c+'" data-month="'+d+'">'+o+"</div>"},g.animating=!1,g.updateCurrentMonthYear=function(a){"undefined"==typeof a?(g.currentMonth=parseInt(g.months.eq(1).attr("data-month"),10),g.currentYear=parseInt(g.months.eq(1).attr("data-year"),10)):(g.currentMonth=parseInt(g.months.eq("next"===a?g.months.length-1:0).attr("data-month"),10),g.currentYear=parseInt(g.months.eq("next"===a?g.months.length-1:0).attr("data-year"),10)),g.container.find(".current-month-value").text(g.params.monthNames[g.currentMonth]),g.container.find(".current-year-value").text(g.currentYear)},g.onMonthChangeStart=function(a){g.updateCurrentMonthYear(a),g.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var b="next"===a?g.months.length-1:0;g.months.eq(b).addClass("picker-calendar-month-current"),g.months.eq("next"===a?b-1:b+1).addClass("next"===a?"picker-calendar-month-prev":"picker-calendar-month-next"),g.params.onMonthYearChangeStart&&g.params.onMonthYearChangeStart(g,g.currentYear,g.currentMonth)},g.onMonthChangeEnd=function(a,b){g.animating=!1;var c,d,e;g.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove(),"undefined"==typeof a&&(a="next",b=!0),b?(g.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove(),d=g.monthHTML(new Date(g.currentYear,g.currentMonth),"prev"),c=g.monthHTML(new Date(g.currentYear,g.currentMonth),"next")):e=g.monthHTML(new Date(g.currentYear,g.currentMonth),a),("next"===a||b)&&g.wrapper.append(e||c),("prev"===a||b)&&g.wrapper.prepend(e||d),g.months=g.wrapper.find(".picker-calendar-month"),g.setMonthsTranslate(g.monthsTranslate),g.params.onMonthAdd&&g.params.onMonthAdd(g,"next"===a?g.months.eq(g.months.length-1)[0]:g.months.eq(0)[0]),g.params.onMonthYearChangeEnd&&g.params.onMonthYearChangeEnd(g,g.currentYear,g.currentMonth),g.updateSelectedInPickers()},g.updateSelectedInPickers=function(){var a=parseInt(g.wrapper.find(".picker-calendar-month-current").attr("data-year"),10),b=(new Date).getFullYear(),c=parseInt(g.wrapper.find(".picker-calendar-month-current").attr("data-month"),10),d=(new Date).getMonth(),e=parseInt(g.yearsPickerWrapper.find(".picker-calendar-year-unit-selected").attr("data-year"),10),f=parseInt(g.monthsPickerWrapper.find(".picker-calendar-month-unit-selected").attr("data-month"),10);e!==a&&(g.yearsPickerWrapper.find(".picker-calendar-year-unit").removeClass("picker-calendar-year-unit-selected"),g.yearsPickerWrapper.find('.picker-calendar-year-unit[data-year="'+a+'"]').addClass("picker-calendar-year-unit-selected")),f!==c&&(g.monthsPickerWrapper.find(".picker-calendar-month-unit").removeClass("picker-calendar-month-unit-selected"),g.monthsPickerWrapper.find('.picker-calendar-month-unit[data-month="'+c+'"]').addClass("picker-calendar-month-unit-selected")),b!==a?g.monthsPickerWrapper.find(".picker-calendar-month-unit").removeClass("current-calendar-month-unit"):g.monthsPickerWrapper.find('.picker-calendar-month-unit[data-month="'+d+'"]').addClass("current-calendar-month-unit")},g.setYearsTranslate=function(a){a=a||g.yearsTranslate||0,"undefined"==typeof g.yearsTranslate&&(g.yearsTranslate=a),g.yearsGroups.removeClass("picker-calendar-years-current picker-calendar-years-prev picker-calendar-years-next");var b=100*-(a+1)*i,c=100*-a*i,d=100*-(a-1)*i;g.yearsGroups.eq(0).transform("translate3d("+(g.isH?b:0)+"%, "+(g.isH?0:b)+"%, 0)").addClass("picker-calendar-years-prev"),g.yearsGroups.eq(1).transform("translate3d("+(g.isH?c:0)+"%, "+(g.isH?0:c)+"%, 0)").addClass("picker-calendar-years-current"),g.yearsGroups.eq(2).transform("translate3d("+(g.isH?d:0)+"%, "+(g.isH?0:d)+"%, 0)").addClass("picker-calendar-years-next")},g.nextYearsGroup=function(a){"undefined"!=typeof a&&"object"!=typeof a||(a="",g.params.animate||(a=0));var b=!g.animating;g.yearsTranslate--,g.animating=!0;var c=100*g.yearsTranslate*i;g.yearsPickerWrapper.transition(a).transform("translate3d("+(g.isH?c:0)+"%, "+(g.isH?0:c)+"%, 0)"),b&&g.yearsPickerWrapper.transitionEnd(function(){g.onYearsChangeEnd("next")}),g.params.animate||g.onYearsChangeEnd("next")},g.prevYearsGroup=function(a){"undefined"!=typeof a&&"object"!=typeof a||(a="",g.params.animate||(a=0));var b=!g.animating;g.yearsTranslate++,g.animating=!0;var c=100*g.yearsTranslate*i;g.yearsPickerWrapper.transition(a).transform("translate3d("+(g.isH?c:0)+"%, "+(g.isH?0:c)+"%, 0)"),b&&g.yearsPickerWrapper.transitionEnd(function(){g.onYearsChangeEnd("prev")}),g.params.animate||g.onYearsChangeEnd("prev")},g.resetYearsGroup=function(a){"undefined"==typeof a&&(a="");var b=100*g.yearsTranslate*i;g.yearsPickerWrapper.transition(a).transform("translate3d("+(g.isH?b:0)+"%, "+(g.isH?0:b)+"%, 0)")},g.setMonthsTranslate=function(a){a=a||g.monthsTranslate||0,"undefined"==typeof g.monthsTranslate&&(g.monthsTranslate=a),g.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var b=100*-(a+1)*i,c=100*-a*i,d=100*-(a-1)*i;g.months.eq(0).transform("translate3d("+(g.isH?b:0)+"%, "+(g.isH?0:b)+"%, 0)").addClass("picker-calendar-month-prev"),g.months.eq(1).transform("translate3d("+(g.isH?c:0)+"%, "+(g.isH?0:c)+"%, 0)").addClass("picker-calendar-month-current"),g.months.eq(2).transform("translate3d("+(g.isH?d:0)+"%, "+(g.isH?0:d)+"%, 0)").addClass("picker-calendar-month-next")},g.nextMonth=function(b){"undefined"!=typeof b&&"object"!=typeof b||(b="",g.params.animate||(b=0));var c=parseInt(g.months.eq(g.months.length-1).attr("data-month"),10),d=parseInt(g.months.eq(g.months.length-1).attr("data-year"),10),e=new Date(d,c),f=e.getTime(),h=!g.animating;if(g.params.maxDate&&f>new Date(g.params.maxDate).getTime())return g.resetMonth();if(g.monthsTranslate--,c===g.currentMonth){var j=100*-g.monthsTranslate*i,k=a(g.monthHTML(f,"next")).transform("translate3d("+(g.isH?j:0)+"%, "+(g.isH?0:j)+"%, 0)").addClass("picker-calendar-month-next");g.wrapper.append(k[0]),g.months=g.wrapper.find(".picker-calendar-month"),g.params.onMonthAdd&&g.params.onMonthAdd(g,g.months.eq(g.months.length-1)[0])}g.animating=!0,g.onMonthChangeStart("next");var l=100*g.monthsTranslate*i;g.wrapper.transition(b).transform("translate3d("+(g.isH?l:0)+"%, "+(g.isH?0:l)+"%, 0)"),h&&g.wrapper.transitionEnd(function(){g.onMonthChangeEnd("next")}),g.params.animate||g.onMonthChangeEnd("next")},g.prevMonth=function(b){"undefined"!=typeof b&&"object"!=typeof b||(b="",g.params.animate||(b=0));var c=parseInt(g.months.eq(0).attr("data-month"),10),d=parseInt(g.months.eq(0).attr("data-year"),10),e=new Date(d,c+1,-1),f=e.getTime(),h=!g.animating;if(g.params.minDate&&f<new Date(g.params.minDate).getTime())return g.resetMonth();if(g.monthsTranslate++,c===g.currentMonth){var j=100*-g.monthsTranslate*i,k=a(g.monthHTML(f,"prev")).transform("translate3d("+(g.isH?j:0)+"%, "+(g.isH?0:j)+"%, 0)").addClass("picker-calendar-month-prev");g.wrapper.prepend(k[0]),g.months=g.wrapper.find(".picker-calendar-month"),g.params.onMonthAdd&&g.params.onMonthAdd(g,g.months.eq(0)[0])}g.animating=!0,g.onMonthChangeStart("prev");var l=100*g.monthsTranslate*i;g.wrapper.transition(b).transform("translate3d("+(g.isH?l:0)+"%, "+(g.isH?0:l)+"%, 0)"),h&&g.wrapper.transitionEnd(function(){g.onMonthChangeEnd("prev")}),g.params.animate||g.onMonthChangeEnd("prev")},g.resetMonth=function(a){"undefined"==typeof a&&(a="");var b=100*g.monthsTranslate*i;g.wrapper.transition(a).transform("translate3d("+(g.isH?b:0)+"%, "+(g.isH?0:b)+"%, 0)")},g.setYearMonth=function(a,b,c){"undefined"==typeof a&&(a=g.currentYear),"undefined"==typeof b&&(b=g.currentMonth),"undefined"!=typeof c&&"object"!=typeof c||(c="",g.params.animate||(c=0));var d;if(d=a<g.currentYear?new Date(a,b+1,-1).getTime():new Date(a,b).getTime(),g.params.maxDate&&d>new Date(g.params.maxDate).getTime())return!1;if(g.params.minDate&&d<new Date(g.params.minDate).getTime())return!1;var e=new Date(g.currentYear,g.currentMonth).getTime(),f=d>e?"next":"prev",h=g.monthHTML(new Date(a,b));g.monthsTranslate=g.monthsTranslate||0;var j,k,l=g.monthsTranslate,m=!g.animating;d>e?(g.monthsTranslate--,g.animating||g.months.eq(g.months.length-1).remove(),g.wrapper.append(h),g.months=g.wrapper.find(".picker-calendar-month"),j=100*-(l-1)*i,g.months.eq(g.months.length-1).transform("translate3d("+(g.isH?j:0)+"%, "+(g.isH?0:j)+"%, 0)").addClass("picker-calendar-month-next")):(g.monthsTranslate++,g.animating||g.months.eq(0).remove(),g.wrapper.prepend(h),g.months=g.wrapper.find(".picker-calendar-month"),j=100*-(l+1)*i,g.months.eq(0).transform("translate3d("+(g.isH?j:0)+"%, "+(g.isH?0:j)+"%, 0)").addClass("picker-calendar-month-prev")),g.params.onMonthAdd&&g.params.onMonthAdd(g,"next"===f?g.months.eq(g.months.length-1)[0]:g.months.eq(0)[0]),g.animating=!0,g.onMonthChangeStart(f),k=100*g.monthsTranslate*i,g.wrapper.transition(c).transform("translate3d("+(g.isH?k:0)+"%, "+(g.isH?0:k)+"%, 0)"),m&&g.wrapper.transitionEnd(function(){g.onMonthChangeEnd(f,!0)}),g.params.animate||g.onMonthChangeEnd(f)},g.nextYear=function(){g.setYearMonth(g.currentYear+1)},g.prevYear=function(){g.setYearMonth(g.currentYear-1)},g.layout=function(){var a,b="",c="",d=g.value&&g.value.length?g.value[0]:(new Date).setHours(0,0,0,0),e=g.yearsGroupHTML(d,"prev"),f=g.yearsGroupHTML(d),h=g.yearsGroupHTML(d,"next"),i='<div class="picker-calendar-years-picker"><div class="picker-calendar-years-picker-wrapper">'+(e+f+h)+"</div></div>",j='<div class="picker-calendar-months-picker"><div class="picker-calendar-months-picker-wrapper">'+g.monthsGroupHTML(d)+"</div></div>",k=g.monthHTML(d,"prev"),l=g.monthHTML(d),m=g.monthHTML(d,"next"),n='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(k+l+m)+"</div></div>",o="";if(g.params.weekHeader){for(a=0;a<7;a++){var p=a+g.params.firstDay>6?a-7+g.params.firstDay:a+g.params.firstDay,q=g.params.dayNamesShort[p];o+='<div class="picker-calendar-week-day '+(g.params.weekendDays.indexOf(p)>=0?"picker-calendar-week-day-weekend":"")+'"> '+q+"</div>"}o='<div class="picker-calendar-week-days">'+o+"</div>"}c="picker-modal picker-calendar "+(g.params.cssClass||"");var r=g.params.toolbar?g.params.toolbarTemplate.replace(/{{closeText}}/g,g.params.toolbarCloseText):"";g.params.toolbar&&(r=g.params.toolbarTemplate.replace(/{{closeText}}/g,g.params.toolbarCloseText).replace(/{{monthPicker}}/g,g.params.monthPicker?g.params.monthPickerTemplate:"").replace(/{{yearPicker}}/g,g.params.yearPicker?g.params.yearPickerTemplate:"")),g.params.head=r,b='<div class="picker-modal-inner">'+o+n+"</div>"+j+i,g.params.content=b},g.params.input&&(g.input=a(g.params.input),g.input.length>0&&(g.params.inputReadOnly&&g.input.prop("readOnly",!0),g.inline||g.input.on("click",e),a(document).on("beforePageSwitch",function(){g.input.off("click",e),a(document).off("beforePageSwitch")}))),g.opened=!1,g.open=function(){var b=!1;g.opened||(g.value||g.params.value&&(g.value=g.params.value,b=!0),g.layout(),g.inline?(g.container=a(g.pickerHTML),g.container.addClass("picker-modal-inline"),a(g.params.container).append(g.container)):(g.container=a.layer(g.params),a(g.container).on("close",function(){f()})),g.container[0].f7Calendar=g,g.wrapper=g.container.find(".picker-calendar-months-wrapper"),g.yearsPickerWrapper=g.container.find(".picker-calendar-years-picker-wrapper"),g.yearsGroups=g.yearsPickerWrapper.find(".picker-calendar-years-group"),g.monthsPickerWrapper=g.container.find(".picker-calendar-months-picker-wrapper"),g.months=g.wrapper.find(".picker-calendar-month"),g.updateCurrentMonthYear(),g.yearsTranslate=0,g.setYearsTranslate(),g.monthsTranslate=0,g.setMonthsTranslate(),g.initCalendarEvents(),b&&g.updateValue()),g.opened=!0,g.initialized=!0,g.params.onMonthAdd&&g.months.each(function(){g.params.onMonthAdd(g,this)})},g.close=function(){g.opened&&!g.inline&&a.layer.close(g.container)},g.destroy=function(){g.close(),g.params.input&&g.input.length>0&&g.input.off("click",e)},g.inline&&g.open(),g};a.fn.calendar=function(b){return this.each(function(){var d=a(this);if(d[0]){var e={};"INPUT"===d[0].tagName.toUpperCase()?e.input=d:e.container=d,new c(a.extend(e,b))}})},a.initCalendar=function(b){var c=a(b?b:document.body);c.find("[data-toggle='date']").each(function(){a(this).calendar()})}}(Zepto);